{"version":3,"file":"static/js/social-login.52072c04.chunk.js","mappings":"qUA2KA,EArJoB,SAAC,IAA8B,UACjD,IAAMA,GAAUC,EAAAA,EAAAA,MACVC,GAAWC,EAAAA,EAAAA,KAETC,GAAeC,EAAAA,EAAAA,GAAeC,EAAAA,IAA9BF,YAERG,EAAAA,EAAAA,YAAU,WACJH,GACFJ,EAAQQ,KAAK,WAEd,CAACJ,EAAYJ,IAEhB,IAAMS,EAAe,SAAC,GAAiC,IAAD,IAA9BC,EAA8B,EAA9BA,OAClBC,EAAoBC,aAAaC,QAAQ,eACzCF,IACFA,EAAeG,KAAKC,MAAMJ,IAE5BT,GACEc,EAAAA,EAAAA,IAAW,CACTC,MAAK,kBACAP,GADD,IAEFQ,YAAYC,EAAAA,EAAAA,KACZC,YAAaC,EAAAA,GAIbC,aAAcX,EAAaY,YAC3BC,aAAcb,EAAac,QAC3BC,mBAAkB,UAAEf,SAAF,aAAE,EAAcgB,UAAUC,WAC5CC,kBAAiB,UAAElB,SAAF,aAAE,EAAcmB,SAASF,iBAwDlD,OACE,iCACE,gBAAKG,UAAU,UAAf,UACE,yBACE,SAAC,IAAD,CAAgBC,KAAK,6BAGzB,gBAAKD,UAAU,cAAf,UACE,2BACE,yBACE,SAAC,KAAD,CACEE,KAAK,gCACLC,QAAS,SAACC,GACRA,EAAEC,kBAHN,UAOE,SAAC,IAAD,CACEC,MAAOC,EAAAA,IAAmB,GAC1BC,UAAU,EACVC,OAAO,qBACPC,SAAS,2BACTC,WAAW,GACXC,MACE,SAAC,KAAD,CACEC,I,qyDACAC,IAAI,iCAGRC,SA9Ee,SAACC,GAC5B,IAAIC,EAAgB,GACpB,GAAID,EAAKE,KAAM,CACb,IAAIA,EAAOF,EAAKE,KAAKC,MAAM,KACvBD,EAAK,KACPD,EAASG,WAAaF,EAAK,GACvBA,EAAK,KACPD,EAASI,UAAYH,EAAK,KAIhCxC,EAAa,CACXC,QAAO,gBACL2C,MAAON,EAAKM,OACTL,GAFC,IAGJM,UAAWP,EAAKQ,OAChBC,WAAYC,EAAAA,GAAAA,yBA+DJC,MAAM,wBAIZ,yBACE,SAAC,KAAD,CACEzB,KAAK,6BACLC,QAAS,SAACC,GACRA,EAAEC,kBAHN,UAME,SAAC,EAAAuB,YAAD,CACEC,SAAUC,EAAAA,IAAwB,GAClCC,WAAW,GACX/B,UAAU,cACVgC,UArEa,SAAChB,GAC1B,IAAIC,EAAgB,GACZgB,EAAejB,EAAfiB,WACJA,EAAWC,WAAaD,EAAWE,YACjCF,EAAWC,YACbjB,EAASG,WAAaa,EAAWC,WAE/BD,EAAWE,aACblB,EAASI,UAAYY,EAAWE,aAGlClB,EAASG,WAAaa,EAAWf,KAGnCxC,EAAa,CACXC,QAAO,gBACL2C,MAAON,EAAKiB,WAAWX,OACpBL,GAFC,IAGJM,UAAWP,EAAKoB,SAChBX,WAAYC,EAAAA,GAAAA,uBAmDJW,UAAW,SAACC,GA1EQ,IAACC,KA2EO,EA1ExCC,QAAQC,IAAI,sCAAuCF,IA4EvCG,aAAc,qBACdC,aAAa","sources":["features/auth/socialLogin/index.tsx"],"sourcesContent":["import FacebookLogin from \"react-facebook-login\";\nimport LoginWithFbIconImg from \"assets/images/login/fb.png\";\nimport { Image, Link } from \"globalComponents/elements\";\nimport { useHistory } from \"react-router-dom\";\nimport { loginThunk } from \"../authThunks\";\nimport { useAppDispatch } from \"app/hooks\";\nimport {\n  loginType,\n  FACEBOOK_APP_ID,\n  DEVICE_TYPE_WEB,\n  GOOGLE_APP_CLIENT_ID,\n} from \"app/constants\";\nimport { selectLoginState } from \"../authSelectors\";\nimport { useEffect } from \"react\";\nimport { useAppSelector } from \"app/hooks\";\nimport { GoogleLogin } from \"react-google-login\";\nimport { getVisiterId } from \"app/fingerprint\";\nimport TranslatedText from \"components/translatedText\";\ninterface SocialLoginInterface {\n  loginHandler?: (e: any) => void;\n}\n\nconst SocialLogin = ({}: SocialLoginInterface) => {\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n\n  const { isLoggedIn } = useAppSelector(selectLoginState);\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      history.push(\"/home\");\n    }\n  }, [isLoggedIn, history]);\n\n  const loginHandler = ({ values }: { values: any }) => {\n    let locationData: any = localStorage.getItem(\"geolocation\");\n    if (locationData) {\n      locationData = JSON.parse(locationData);\n    }\n    dispatch(\n      loginThunk({\n        body: {\n          ...values,\n          visitor_id: getVisiterId(),\n          device_type: DEVICE_TYPE_WEB,\n          // country_code: \"IN\",\n          // country_name: \"India\",\n\n          country_code: locationData.countryCode,\n          country_name: locationData.country,\n          location_longitude: locationData?.longitude.toString(),\n          location_latitude: locationData?.latitude.toString(),\n        },\n      })\n    );\n    // });\n  };\n\n  const facebookLoginHandler = (data: any) => {\n    let username: any = {};\n    if (data.name) {\n      let name = data.name.split(\" \");\n      if (name[0]) {\n        username.first_name = name[0];\n        if (name[1]) {\n          username.last_name = name[1];\n        }\n      }\n    }\n    loginHandler({\n      values: {\n        email: data.email,\n        ...username,\n        social_id: data.userID,\n        login_type: loginType.LOGIN_WITH_FACEBOOK,\n      },\n    });\n  };\n\n  const googleLoginFailureHandler = (error: any) => {\n    console.log(\"@googleLoginFailureHandler ===error\", error);\n  };\n\n  const googleLoginSuccess = (data: any) => {\n    let username: any = {};\n    const { profileObj } = data;\n    if (profileObj.givenName || profileObj.familyName) {\n      if (profileObj.givenName) {\n        username.first_name = profileObj.givenName;\n      }\n      if (profileObj.familyName) {\n        username.last_name = profileObj.familyName;\n      }\n    } else {\n      username.first_name = profileObj.name;\n    }\n\n    loginHandler({\n      values: {\n        email: data.profileObj.email,\n        ...username,\n        social_id: data.googleId,\n        login_type: loginType.LOGIN_WITH_GOOGLE,\n      },\n    });\n  };\n\n  return (\n    <>\n      <div className=\"contiue\">\n        <h3>\n          <TranslatedText text=\"auth.orContinueWith\" />\n        </h3>\n      </div>\n      <div className=\"loginsicons\">\n        <ul>\n          <li>\n            <Link\n              href=\"/login-buyradar-with-facebook\"\n              onClick={(e) => {\n                e.preventDefault();\n              }}\n            >\n              {/* public_profile */}\n              <FacebookLogin\n                appId={FACEBOOK_APP_ID || \"\"}\n                autoLoad={false}\n                fields=\"name,email,picture\"\n                cssClass=\"my-facebook-button-class\"\n                textButton=\"\"\n                icon={\n                  <Image\n                    src={LoginWithFbIconImg}\n                    alt=\"login-buyradar-with-facebook\"\n                  />\n                }\n                callback={facebookLoginHandler}\n                scope=\"public_profile\"\n              />\n            </Link>\n          </li>\n          <li>\n            <Link\n              href=\"/login-buyradar-with-gmail\"\n              onClick={(e) => {\n                e.preventDefault();\n              }}\n            >\n              <GoogleLogin\n                clientId={GOOGLE_APP_CLIENT_ID || \"\"}\n                buttonText=\"\"\n                className=\"google_bttn\"\n                onSuccess={googleLoginSuccess}\n                onFailure={(response: any) => {\n                  googleLoginFailureHandler(true);\n                }}\n                cookiePolicy={\"single_host_origin\"}\n                responseType=\"code,token\"\n              />\n              {/* <Image\n                src={LoginWithGmailIconImg}\n                alt=\"login-buyradar-with-gmail\"\n              /> */}\n            </Link>\n          </li>\n        </ul>\n      </div>\n    </>\n  );\n};\n\nexport default SocialLogin;\n"],"names":["history","useHistory","dispatch","useAppDispatch","isLoggedIn","useAppSelector","selectLoginState","useEffect","push","loginHandler","values","locationData","localStorage","getItem","JSON","parse","loginThunk","body","visitor_id","getVisiterId","device_type","DEVICE_TYPE_WEB","country_code","countryCode","country_name","country","location_longitude","longitude","toString","location_latitude","latitude","className","text","href","onClick","e","preventDefault","appId","FACEBOOK_APP_ID","autoLoad","fields","cssClass","textButton","icon","src","alt","callback","data","username","name","split","first_name","last_name","email","social_id","userID","login_type","loginType","scope","GoogleLogin","clientId","GOOGLE_APP_CLIENT_ID","buttonText","onSuccess","profileObj","givenName","familyName","googleId","onFailure","response","error","console","log","cookiePolicy","responseType"],"sourceRoot":""}